---
sidebar_position: 99
title: "OwnerMod"
description: "Manages ERC-173 contract ownership and access control."
gitSource: "https://github.com/maxnorm/Compose/blob/7e2dd824639f424be644c4ebbb3ca2508167329f/src/access/Owner/OwnerMod.sol"
---

import DocSubtitle  from '@site/src/components/docs/DocSubtitle';
import Badge from '@site/src/components/ui/Badge';
import Callout from '@site/src/components/ui/Callout';
import CalloutBox from '@site/src/components/ui/CalloutBox';
import Accordion, { AccordionGroup } from '@site/src/components/ui/Accordion';
import PropertyTable from '@site/src/components/api/PropertyTable';
import ExpandableCode from '@site/src/components/code/ExpandableCode';
import CodeShowcase from '@site/src/components/code/CodeShowcase';
import RelatedDocs from '@site/src/components/docs/RelatedDocs';
import WasThisHelpful from '@site/src/components/docs/WasThisHelpful';
import LastUpdated from '@site/src/components/docs/LastUpdated';
import ReadingTime from '@site/src/components/docs/ReadingTime';
import GradientText from '@site/src/components/ui/GradientText';
import GradientButton from '@site/src/components/ui/GradientButton';

<DocSubtitle>
Manages ERC-173 contract ownership and access control.
</DocSubtitle>

<Callout type="info" title="Key Features">
- ERC-173 compliant ownership management.
- Provides `owner()` view function to check the current owner.
- Includes `requireOwner()` for access control checks.
- Supports ownership renouncement by setting the owner to `address(0)`.
</Callout>

<Callout type="info" title="Module Usage">
This module provides internal functions for use in your custom facets. Import it to access shared logic and storage.
</Callout>

## Overview

The OwnerMod provides essential ERC-173 compliant ownership functionality. It allows for setting, transferring, and verifying the contract owner, ensuring that critical administrative actions are restricted to the designated owner address. This module is fundamental for securing administrative functions within a diamond.

---

## Storage

### OwnerStorage

storage-location: erc8042:compose.owner

<ExpandableCode language="solidity" maxLines={15} title="Definition">
{`struct OwnerStorage {
address owner;
}`}
</ExpandableCode>

### State Variables

<PropertyTable
  properties={[
    {
      name: "STORAGE_POSITION",
      type: "bytes32",
      description: "Diamond storage slot position for this module (Value: `keccak256(\"compose.owner\")`)"
    }
  ]}
  showRequired={false}
/>

## Functions

### getStorage

Returns a pointer to the ERC-173 storage struct. Uses inline assembly to access the storage slot defined by STORAGE_POSITION.

<ExpandableCode language="solidity" maxLines={8}>
{`function getStorage() pure returns (OwnerStorage storage s);`}
</ExpandableCode>

**Returns:**

<PropertyTable
  properties={[
    {
      name: "s",
      type: "OwnerStorage",
      description: "The OwnerStorage struct in storage."
    }
  ]}
  showRequired={false}
/>

---
### owner

Get the address of the owner

<ExpandableCode language="solidity" maxLines={8}>
{`function owner() view returns (address);`}
</ExpandableCode>

**Returns:**

<PropertyTable
  properties={[
    {
      name: "-",
      type: "address",
      description: "The address of the owner."
    }
  ]}
  showRequired={false}
/>

---
### requireOwner

Reverts if the caller is not the owner.

<ExpandableCode language="solidity" maxLines={8}>
{`function requireOwner() view;`}
</ExpandableCode>

---
### setContractOwner

<ExpandableCode language="solidity" maxLines={8}>
{`function setContractOwner(address _initialOwner) ;`}
</ExpandableCode>

**Parameters:**

<PropertyTable
  properties={[
    {
      name: "_initialOwner",
      type: "address",
      description: ""
    }
  ]}
  showRequired={false}
/>

---
### transferOwnership

Set the address of the new owner of the contract Set _newOwner to address(0) to renounce any ownership.

<ExpandableCode language="solidity" maxLines={8}>
{`function transferOwnership(address _newOwner) ;`}
</ExpandableCode>

**Parameters:**

<PropertyTable
  properties={[
    {
      name: "_newOwner",
      type: "address",
      description: "The address of the new owner of the contract"
    }
  ]}
  showRequired={false}
/>

## Events

<AccordionGroup>
  <Accordion title="OwnershipTransferred" defaultOpen={false}>
    <div style={{marginBottom: "1rem"}}>
      This emits when ownership of a contract changes.
    </div>

    <div style={{marginBottom: "1rem"}}>
      <strong>Signature:</strong>
      <ExpandableCode language="solidity" maxLines={5}>
{`event OwnershipTransferred(address indexed previousOwner, address indexed newOwner);`}
      </ExpandableCode>
    </div>

  </Accordion>
</AccordionGroup>

## Errors

<AccordionGroup>
  <Accordion title="OwnerAlreadyRenounced" defaultOpen={false}>

    <div>
      <strong>Signature:</strong>
      <ExpandableCode language="solidity" maxLines={5}>
error OwnerAlreadyRenounced();
      </ExpandableCode>
    </div>
  </Accordion>
  <Accordion title="OwnerUnauthorizedAccount" defaultOpen={false}>

    <div>
      <strong>Signature:</strong>
      <ExpandableCode language="solidity" maxLines={5}>
error OwnerUnauthorizedAccount();
      </ExpandableCode>
    </div>
  </Accordion>
</AccordionGroup>

## Usage Example

<ExpandableCode language="solidity" maxLines={20} title="Example Implementation">
{`pragma solidity ^0.8.30;

import {IOwnerMod} from "./interfaces/IOwnerMod.sol";

contract MyOwnerFacet {
    IOwnerMod private immutable _ownerMod;

    constructor(address ownerModAddress) {
        _ownerMod = IOwnerMod(ownerModAddress);
    }

    /**
     * @notice Retrieves the current contract owner.
     */
    function getCurrentOwner() external view returns (address) {
        return _ownerMod.owner();
    }

    /**
     * @notice Transfers ownership to a new address.
     * @param _newOwner The address of the new owner.
     */
    function transferContractOwnership(address _newOwner) external {
        _ownerMod.transferOwnership(_newOwner);
    }

    /**
     * @notice Renounces ownership of the contract.
     */
    function renounceContractOwnership() external {
        _ownerMod.transferOwnership(address(0));
    }
}`}
</ExpandableCode>

## Best Practices

<Callout type="tip" title="Best Practice">
- Use `transferOwnership` to set a new owner or renounce ownership by passing `address(0)`.
- Implement `requireOwner` in your facets to protect sensitive administrative functions.
- Be aware that transferring ownership is a critical operation; ensure the new owner address is correct.
</Callout>

## Integration Notes

<Callout type="success" title="Shared Storage">
The OwnerMod utilizes a dedicated storage slot for its ERC-173 ownership struct. Facets interacting with ownership should call the `owner()` or `requireOwner()` functions provided by this module. The `setContractOwner` function should typically be called only during the diamond's initialization or upgrade process by an authorized entity, not by regular facets during runtime operations unless specifically designed for administrative tasks.
</Callout>

<div style={{marginTop: "3rem", paddingTop: "2rem", borderTop: "1px solid var(--ifm-color-emphasis-200)"}}>
  <WasThisHelpful pageId="OwnerMod" />
</div>

<LastUpdated date="2025-12-21T21:53:40.758Z" />
