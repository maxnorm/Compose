---
sidebar_position: 510
title: "ExampleDiamond"
description: "Example Diamond library for Compose diamonds"
gitSource: "https://github.com/Perfect-Abstractions/Compose/tree/main/src/diamond/example/ExampleDiamond.sol"
---

import DocSubtitle  from '@site/src/components/docs/DocSubtitle';
import Badge from '@site/src/components/ui/Badge';
import Callout from '@site/src/components/ui/Callout';
import CalloutBox from '@site/src/components/ui/CalloutBox';
import Accordion, { AccordionGroup } from '@site/src/components/ui/Accordion';
import PropertyTable from '@site/src/components/api/PropertyTable';
import ExpandableCode from '@site/src/components/code/ExpandableCode';
import CodeShowcase from '@site/src/components/code/CodeShowcase';
import RelatedDocs from '@site/src/components/docs/RelatedDocs';
import WasThisHelpful from '@site/src/components/docs/WasThisHelpful';
import LastUpdated from '@site/src/components/docs/LastUpdated';
import ReadingTime from '@site/src/components/docs/ReadingTime';
import GradientText from '@site/src/components/ui/GradientText';
import GradientButton from '@site/src/components/ui/GradientButton';

<DocSubtitle>
Example Diamond library for Compose diamonds
</DocSubtitle>

<Callout type="info" title="Key Features">
- Demonstrates diamond initialization with facets and owner.
- Exposes fallback and receive functions for ether handling.
- Provides a template for custom diamond implementations.
- Compliant with EIP-2535 Diamond Standard.
</Callout>

## Overview

This library provides an example implementation of a diamond contract, demonstrating facet registration and basic diamond functionality. It serves as a foundational template for developers to build upon. The example diamond initializes with provided facets and an owner, enabling routing of calls to registered facet functions.

---

## Storage

## Functions

### constructor

Struct to hold facet address and its function selectors. struct FacetFunctions &#123; address facet; bytes4[] selectors; &#125; Initializes the diamond contract with facets, owner and other data. Adds all provided facets to the diamond's function selector mapping and sets the contract owner. Each facet in the array will have its function selectors registered to enable delegatecall routing.

<ExpandableCode language="solidity" maxLines={8}>
{`constructor(DiamondMod.FacetFunctions[] memory _facets, address _diamondOwner) ;`}
</ExpandableCode>

**Parameters:**

<PropertyTable
  properties={[
    {
      name: "_facets",
      type: "DiamondMod.FacetFunctions[]",
      description: "Array of facet addresses and their corresponding function selectors to add to the diamond."
    },
    {
      name: "_diamondOwner",
      type: "address",
      description: "Address that will be set as the owner of the diamond contract."
    }
  ]}
  showRequired={false}
/>

---
### fallback

<ExpandableCode language="solidity" maxLines={8}>
{`fallback() external payable;`}
</ExpandableCode>

---
### receive

<ExpandableCode language="solidity" maxLines={8}>
{`receive() external payable;`}
</ExpandableCode>

<!-- Usage Example section commented out for now -->
<!--
## Usage Example

<ExpandableCode language="solidity" maxLines={20} title="Example Implementation">
{`pragma solidity >=0.8.30;

import { ExampleDiamond, DiamondMod } from "@compose/diamond/example/ExampleDiamond";

contract Deployer {
    address public diamondAddress;

    function deployDiamond(address _diamondOwner, DiamondMod.FacetFunctions[] memory _facets) public {
        ExampleDiamond exampleDiamond = new ExampleDiamond(_facets, _diamondOwner);
        diamondAddress = address(exampleDiamond);
    }

    // Example of interacting with a deployed diamond (assuming a facet is registered)
    function callRegisteredFacet(address _diamondAddress, bytes memory _calldata) public {
        IDiamond(_diamondAddress).fallback.value(0)(_calldata);
    }
}

interface IDiamond {
    function fallback(bytes calldata _calldata) external payable;
}`}
</ExpandableCode>
-->

## Best Practices

<Callout type="tip" title="Best Practice">
- Initialize the diamond with all necessary facets and the owner during deployment.
- Ensure facet function selectors accurately map to registered facet addresses.
- Utilize the diamond's fallback and receive functions for ether handling if required.
</Callout>

## Security Considerations

<Callout type="warning" title="Security">
Follow standard Solidity security practices. Ensure that facet registration and initialization are performed securely. The fallback and receive functions should be carefully considered for ether handling to prevent unexpected behavior.
</Callout>

<div style={{marginTop: "3rem", paddingTop: "2rem", borderTop: "1px solid var(--ifm-color-emphasis-200)"}}>
  <RelatedDocs
    items={[
      {
        title: "ExampleDiamond",
        href: "/docs/library/diamond/example/ExampleDiamond",
        description: "Module used by ExampleDiamond",
        icon: "ðŸ“¦"
      },
      {
        title: "DiamondInspectFacet",
        href: "/docs/library/diamond/DiamondInspectFacet",
        description: "Related facet in diamond",
        icon: "ðŸ’Ž"
      },
      {
        title: "DiamondLoupeFacet",
        href: "/docs/library/diamond/DiamondLoupeFacet",
        description: "Related facet in diamond",
        icon: "ðŸ’Ž"
      },
      {
        title: "DiamondUpgradeFacet",
        href: "/docs/library/diamond/DiamondUpgradeFacet",
        description: "Related facet in diamond",
        icon: "ðŸ’Ž"
      }
    ]}
  />
</div>

<div style={{marginTop: "3rem", paddingTop: "2rem", borderTop: "1px solid var(--ifm-color-emphasis-200)"}}>
  <WasThisHelpful pageId="ExampleDiamond" />
</div>

<LastUpdated date="2025-12-30T18:43:24.665Z" />
