---
sidebar_position: 99
title: "OwnerTwoStepsMod"
description: "ERC-173 Two-Step Contract Ownership Library - Provides two-step ownership transfer logic for facets or modular contracts."
---

import DocHero from '@site/src/components/docs/DocHero';
import Callout from '@site/src/components/ui/Callout';


## Overview

The OwnerTwoStepsMod module provides secure two-step ownership management for diamond contracts and modular contracts in compliance with the ERC-173 standard. It enables explicit ownership transfer through the pending owner mechanism, ensuring safe and controlled transitions of contract ownership.


[View Source](https://github.com/maxnorm/Compose/blob/120348af74dbcdccde5d091d5c92f84ffed4753d/src/access/OwnerTwoSteps/OwnerTwoStepsMod.sol)



<Callout type="info" title="Key Features">
- Implements ERC-173 compliant ownership transfer.\n- Two-step ownership transfer for enhanced safety.\n- Supports `renounceOwnership` to create a permissionless design.
</Callout>



<Callout type="info" title="Module Usage">
This module provides internal functions for use in your custom facets. Import it to access shared logic and storage.
</Callout>


## Storage


Storage position: `OWNER_STORAGE_POSITION` - Used for diamond storage pattern.



### State Variables


#### OWNER_STORAGE_POSITION



#### PENDING_OWNER_STORAGE_POSITION







## Functions


### acceptOwnership


Finalizes ownership transfer; must be called by the pending owner.



```solidity
function acceptOwnership() ;
```





### getOwnerStorage


Returns a pointer to the Owner storage struct. Uses inline assembly to access the storage slot defined by OWNER_STORAGE_POSITION. **Returns**



```solidity
function getOwnerStorage() pure returns (OwnerStorage storage s);
```




**Returns**

| Name | Type | Description |
|------|------|-------------|

| `s` | `OwnerStorage` | The OwnerStorage struct in storage. |




### getPendingOwnerStorage


Returns a pointer to the PendingOwner storage struct. Uses inline assembly to access the storage slot defined by PENDING_OWNER_STORAGE_POSITION. **Returns**



```solidity
function getPendingOwnerStorage() pure returns (PendingOwnerStorage storage s);
```




**Returns**

| Name | Type | Description |
|------|------|-------------|

| `s` | `PendingOwnerStorage` | The PendingOwnerStorage struct in storage. |




### owner


Returns the current owner.



```solidity
function owner() view returns (address);
```





### pendingOwner


Returns the pending owner (if any).



```solidity
function pendingOwner() view returns (address);
```





### renounceOwnership


Renounce ownership of the contract Sets the owner to address(0), disabling all functions restricted to the owner.



```solidity
function renounceOwnership() ;
```





### requireOwner


Reverts if the caller is not the owner.



```solidity
function requireOwner() view;
```





### transferOwnership


Initiates a two-step ownership transfer. **Parameters**



```solidity
function transferOwnership(address _newOwner) ;
```



**Parameters**

| Name | Type | Description |
|------|------|-------------|

| `_newOwner` | `address` | The address of the new owner of the contract |







## Events


### OwnershipTransferStarted


Emitted when ownership transfer is initiated (pending owner set).



```solidity
event OwnershipTransferStarted(address indexed _previousOwner, address indexed _newOwner);
```




### OwnershipTransferred


Emitted when ownership transfer is finalized.



```solidity
event OwnershipTransferred(address indexed _previousOwner, address indexed _newOwner);
```






## Errors


### OwnerAlreadyRenounced



```solidity
error OwnerAlreadyRenounced();
```



### OwnerUnauthorizedAccount



```solidity
error OwnerUnauthorizedAccount();
```





## Structs


### OwnerStorage


**Note:** storage-location: erc8042:compose.owner



```solidity
struct OwnerStorage {
address owner;
}
```



### PendingOwnerStorage


**Note:** storage-location: erc8042:compose.owner.pending



```solidity
struct PendingOwnerStorage {
address pendingOwner;
}
```





## Usage Example

```solidity
pragma solidity ^0.8.17;\n\nimport { OwnerTwoStepsMod } from &quot;./OwnerTwoStepsMod.sol&quot;;\n\ncontract ExampleContract {\n    OwnerTwoStepsMod private ownerModule;\n\n    constructor() {\n        // Initialize the ownership module\n        ownerModule.transferOwnership(msg.sender);\n    }\n\n    function transferContractOwnership(address _newOwner) external {\n        ownerModule.requireOwner();\n        ownerModule.transferOwnership(_newOwner);\n    }\n\n    function acceptOwnership() external {\n        ownerModule.acceptOwnership();\n    }\n\n    function currentOwner() external view returns (address) {\n        return ownerModule.owner();\n    }\n}
```



## Best Practices

<Callout type="tip" title="Best Practice">
- Always use the `requireOwner` function at the start of any function requiring ownership authorization to ensure security.\n- Complete the two-step transfer process by calling `acceptOwnership` to finalize and enable the new owner.\n- Use clear and intentional logic when renouncing ownership, as it will make the contract permanently ownerless.
</Callout>





## Integration Notes

<Callout type="success" title="Shared Storage">
OwnerTwoStepsMod follows the diamond storage pattern, enabling seamless integration into any diamond facet. Ownership changes made via this module are immediately reflected and accessible to all facets sharing the same diamond storage layout.
</Callout>




