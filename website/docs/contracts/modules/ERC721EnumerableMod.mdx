---
sidebar_position: 99
title: "ERC721EnumerableMod"
description: "ERC-721 Enumerable Library for Compose - Thrown when attempting to interact with a non-existent token."
---

import DocHero from '@site/src/components/docs/DocHero';
import Callout from '@site/src/components/ui/Callout';


## Overview

ERC721EnumerableMod provides Enumerable functionality for Compose-based ERC-721 implementations, enabling token enumeration and management through operations like minting, burning, and transferring. It ensures compatibility with the diamond storage pattern and supports safe, transparent token lifecycle management.


[View Source](https://github.com/maxnorm/Compose/blob/120348af74dbcdccde5d091d5c92f84ffed4753d/src/token/ERC721/ERC721Enumerable/ERC721EnumerableMod.sol)



<Callout type="info" title="Key Features">
- Supports enumeration for ERC-721 tokens.\n- Provides safe mint, burn, and transfer operations.\n- Seamless integration with Compose diamond storage.
</Callout>



<Callout type="info" title="Module Usage">
This module provides internal functions for use in your custom facets. Import it to access shared logic and storage.
</Callout>


## Storage


Storage position: `STORAGE_POSITION` - Used for diamond storage pattern.



### State Variables


#### STORAGE_POSITION







## Functions


### burn


Burns (destroys) an existing ERC-721 token, removing it from enumeration lists. Reverts if the token does not exist or if the sender is not authorized. **Parameters**



```solidity
function burn(uint256 _tokenId, address _sender) ;
```



**Parameters**

| Name | Type | Description |
|------|------|-------------|

| `_tokenId` | `uint256` | The ID of the token to burn. |

| `_sender` | `address` | The address initiating the burn. |





### getStorage


Returns the ERC-721 enumerable storage struct from its predefined slot. Uses inline assembly to point to the correct diamond storage position. **Returns**



```solidity
function getStorage() pure returns (ERC721EnumerableStorage storage s);
```




**Returns**

| Name | Type | Description |
|------|------|-------------|

| `s` | `ERC721EnumerableStorage` | The storage reference for ERC-721 enumerable state variables. |




### mint


Mints a new ERC-721 token to the specified address, adding it to enumeration lists. Reverts if the receiver address is zero or if the token already exists. **Parameters**



```solidity
function mint(address _to, uint256 _tokenId) ;
```



**Parameters**

| Name | Type | Description |
|------|------|-------------|

| `_to` | `address` | The address that will own the newly minted token. |

| `_tokenId` | `uint256` | The ID of the token to mint. |





### transferFrom


Transfers a token ID from one address to another, updating enumeration data. Validates ownership, approval, and receiver address before state updates. **Parameters**



```solidity
function transferFrom(address _from, address _to, uint256 _tokenId, address _sender) ;
```



**Parameters**

| Name | Type | Description |
|------|------|-------------|

| `_from` | `address` | The current owner of the token. |

| `_to` | `address` | The address receiving the token. |

| `_tokenId` | `uint256` | The ID of the token being transferred. |

| `_sender` | `address` | The initiator of the transfer (may be owner or approved operator). |







## Events


### Transfer


Emitted when ownership of a token changes, including minting and burning. **Parameters**



```solidity
event Transfer(address indexed _from, address indexed _to, uint256 indexed _tokenId);
```



| Parameter | Type | Description |
|-----------|------|-------------|

| `_from` | `address` | The address transferring the token, or zero for minting. |

| `_to` | `address` | The address receiving the token, or zero for burning. |

| `_tokenId` | `uint256` | The ID of the token being transferred. |






## Errors


### ERC721IncorrectOwner


Thrown when the sender is not the owner of the token. **Parameters**



```solidity
error ERC721IncorrectOwner(address _sender, uint256 _tokenId, address _owner);
```



### ERC721InsufficientApproval


Thrown when an operator lacks approval to manage a token. **Parameters**



```solidity
error ERC721InsufficientApproval(address _operator, uint256 _tokenId);
```



### ERC721InvalidReceiver


Thrown when the receiver address is invalid. **Parameters**



```solidity
error ERC721InvalidReceiver(address _receiver);
```



### ERC721InvalidSender


Thrown when the sender address is invalid. **Parameters**



```solidity
error ERC721InvalidSender(address _sender);
```



### ERC721NonexistentToken


Thrown when attempting to interact with a non-existent token. **Parameters**



```solidity
error ERC721NonexistentToken(uint256 _tokenId);
```





## Structs


### ERC721EnumerableStorage



```solidity
struct ERC721EnumerableStorage {
mapping(uint256 tokenId =&gt; address owner) ownerOf;
mapping(address owner =&gt; uint256[] ownerTokens) ownerTokens;
mapping(uint256 tokenId =&gt; uint256 ownerTokensIndex) ownerTokensIndex;
uint256[] allTokens;
mapping(uint256 tokenId =&gt; uint256 allTokensIndex) allTokensIndex;
mapping(address owner =&gt; mapping(address operator =&gt; bool approved)) isApprovedForAll;
mapping(uint256 tokenId =&gt; address approved) approved;
string name;
string symbol;
string baseURI;
}
```





## Usage Example

```solidity
pragma solidity ^0.8.0;\n\nimport { ERC721EnumerableMod } from &#39;./ERC721EnumerableMod.sol&#39;;\n\ncontract MyNFTFacet {\n    function mintToken(address _to, uint256 _tokenId) external {\n        ERC721EnumerableMod.mint(_to, _tokenId);\n    }\n\n    function burnToken(uint256 _tokenId) external {\n        ERC721EnumerableMod.burn(_tokenId);\n    }\n\n    function transferToken(address _from, address _to, uint256 _tokenId) external {\n        ERC721EnumerableMod.transferFrom(_from, _to, _tokenId);\n    }\n\n    function viewStorage() external view returns (ERC721EnumerableMod.StorageStruct memory) {\n        return ERC721EnumerableMod.getStorage();\n    }\n}
```



## Best Practices

<Callout type="tip" title="Best Practice">
- Always validate the ownership and authorization before calling sensitive functions like `burn` and `transferFrom`.\n- Before adding to storage within a new facet, ensure storage compatibility by aligning with the storage layout slot.\n- Use explicit checks for receiver addresses (to prevent passing zero addresses) during minting and transferring.
</Callout>





## Integration Notes

<Callout type="success" title="Shared Storage">
ERC721EnumerableMod utilizes the diamond storage pattern, ensuring all updates made through this module are visible across all facets that share the same storage. Modifications are directly applied to the respective storage struct, ensuring consistent and centralized state management.
</Callout>




