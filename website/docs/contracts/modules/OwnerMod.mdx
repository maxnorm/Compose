---
sidebar_position: 99
title: "OwnerMod"
description: "ERC-173 Contract Ownership - Provides internal functions and storage layout for owner management."
gitSource: "https://github.com/maxnorm/Compose/blob/117a9e586e335bd5662e5aba533c315582d9ef9b/src/access/Owner/OwnerMod.sol"
---

import DocSubtitle  from '@site/src/components/docs/DocSubtitle';
import Badge from '@site/src/components/ui/Badge';
import Callout from '@site/src/components/ui/Callout';
import CalloutBox from '@site/src/components/ui/CalloutBox';
import Accordion, { AccordionGroup } from '@site/src/components/ui/Accordion';
import PropertyTable from '@site/src/components/api/PropertyTable';
import ExpandableCode from '@site/src/components/code/ExpandableCode';
import CodeShowcase from '@site/src/components/code/CodeShowcase';
import RelatedDocs from '@site/src/components/docs/RelatedDocs';
import WasThisHelpful from '@site/src/components/docs/WasThisHelpful';
import LastUpdated from '@site/src/components/docs/LastUpdated';
import ReadingTime from '@site/src/components/docs/ReadingTime';
import GradientText from '@site/src/components/ui/GradientText';
import GradientButton from '@site/src/components/ui/GradientButton';

<DocSubtitle>
ERC-173 Contract Ownership - Provides internal functions and storage layout for owner management.
</DocSubtitle>

<Callout type="info" title="Key Features">
- Facilitates standardized ERC-173 ownership integration.
- Enables permissioned access control across facets using &#x60;requireOwner&#x60;.
- Provides flexibility with explicit renouncing of ownership enabled via &#x60;transferOwnership&#x60;.
</Callout>

<Callout type="info" title="Module Usage">
This module provides internal functions for use in your custom facets. Import it to access shared logic and storage.
</Callout>

## Overview

The OwnerMod module implements ERC-173 compliant ownership management for diamond contracts. It provides internal utility functions and standardized storage layout for owner identification and updates. Modules and facets can leverage this to enforce access control and maintain a consistent ownership model.

---

## Storage

### OwnerStorage

**Note:** storage-location: erc8042:compose.owner

<ExpandableCode language="solidity" maxLines={15} title="Definition">
{`struct OwnerStorage {
address owner;
}`}
</ExpandableCode>

Storage position: &#x60;STORAGE_POSITION&#x60; - Used for diamond storage pattern.
---
### State Variables

<PropertyTable
  properties={[
    {
      name: "STORAGE_POSITION",
      type: "bytes32",
      description: " (Value: `keccak256(&quot;compose.owner&quot;)`)"
    }
  ]}
  showRequired={false}
/>

## Functions

### getStorage

Returns a pointer to the ERC-173 storage struct. Uses inline assembly to access the storage slot defined by STORAGE_POSITION. **Returns**

<ExpandableCode language="solidity" maxLines={8}>
{`function getStorage() pure returns (OwnerStorage storage s);`}
</ExpandableCode>

**Returns:**

<PropertyTable
  properties={[
    {
      name: "s",
      type: "OwnerStorage",
      description: "The OwnerStorage struct in storage."
    }
  ]}
  showRequired={false}
/>

---
### owner

Get the address of the owner **Returns**

<ExpandableCode language="solidity" maxLines={8}>
{`function owner() view returns (address);`}
</ExpandableCode>

**Returns:**

<PropertyTable
  properties={[
    {
      name: "-",
      type: "address",
      description: "The address of the owner."
    }
  ]}
  showRequired={false}
/>

---
### requireOwner

Reverts if the caller is not the owner.

<ExpandableCode language="solidity" maxLines={8}>
{`function requireOwner() view;`}
</ExpandableCode>

---
### setContractOwner

<ExpandableCode language="solidity" maxLines={8}>
{`function setContractOwner(address _initialOwner) ;`}
</ExpandableCode>

**Parameters:**

<PropertyTable
  properties={[
    {
      name: "_initialOwner",
      type: "address",
      description: ""
    }
  ]}
  showRequired={false}
/>

---
### transferOwnership

Set the address of the new owner of the contract Set _newOwner to address(0) to renounce any ownership. **Parameters**

<ExpandableCode language="solidity" maxLines={8}>
{`function transferOwnership(address _newOwner) ;`}
</ExpandableCode>

**Parameters:**

<PropertyTable
  properties={[
    {
      name: "_newOwner",
      type: "address",
      description: "The address of the new owner of the contract"
    }
  ]}
  showRequired={false}
/>

## Events

<AccordionGroup>
  <Accordion title="OwnershipTransferred" defaultOpen={false}>
    <div style={{marginBottom: "1rem"}}>
      This emits when ownership of a contract changes.
    </div>

    <div style={{marginBottom: "1rem"}}>
      <strong>Signature:</strong>
      <ExpandableCode language="solidity" maxLines={5}>
{`event OwnershipTransferred(address indexed previousOwner, address indexed newOwner);`}
      </ExpandableCode>
    </div>

  </Accordion>
</AccordionGroup>

## Errors

<AccordionGroup>
  <Accordion title="OwnerAlreadyRenounced" defaultOpen={false}>

    <div>
      <strong>Signature:</strong>
      <ExpandableCode language="solidity" maxLines={5}>
error OwnerAlreadyRenounced();
      </ExpandableCode>
    </div>
  </Accordion>
  <Accordion title="OwnerUnauthorizedAccount" defaultOpen={false}>

    <div>
      <strong>Signature:</strong>
      <ExpandableCode language="solidity" maxLines={5}>
error OwnerUnauthorizedAccount();
      </ExpandableCode>
    </div>
  </Accordion>
</AccordionGroup>

## Usage Example

<ExpandableCode language="solidity" maxLines={20} title="Example Implementation">
{`pragma solidity ^0.8.30;

interface OwnerMod {
    function owner() external view returns (address);
    function transferOwnership(address _newOwner) external;
    function requireOwner() external;
}

contract ExampleFacet {
    /**
     * Transfers ownership to a specified address.
     * Reverts if not called by the current owner.
     */
    function exampleTransferOwnership(address _newOwner) external {
        OwnerMod(address(this)).requireOwner();
        OwnerMod(address(this)).transferOwnership(_newOwner);
    }

    /**
     * Retrieves the current owner's address.
     */
    function getCurrentOwner() external view returns (address) {
        return OwnerMod(address(this)).owner();
    }
}`}
</ExpandableCode>

## Best Practices

<Callout type="tip" title="Best Practice">
- Ensure proper storage layout when integrating; modifying the &#x60;STORAGE_POSITION&#x60; can cause unexpected behavior.
- Use &#x60;requireOwner&#x60; to enforce owner-only access within facets whenever sensitive logic or updates are performed.
- Call &#x60;transferOwnership(address(0))&#x60; explicitly if renouncing ownership to maintain contract governance clarity.
</Callout>

## Integration Notes

<Callout type="success" title="Shared Storage">
This module uses a well-defined storage layout accessed through the &#x60;getStorage&#x60; function, which relies on a fixed &#x60;STORAGE_POSITION&#x60;. Facets operating with this module must maintain compatibility and avoid altering the storage struct. Ownership changes through &#x60;transferOwnership&#x60; are immediately visible across all facets, as they share the same diamond storage infrastructure. Ensure all facets comply with this shared state model to avoid inconsistencies.
</Callout>

<div style={{marginTop: "3rem", paddingTop: "2rem", borderTop: "1px solid var(--ifm-color-emphasis-200)"}}>
  <WasThisHelpful pageId="OwnerMod" />
</div>

<LastUpdated date="2025-12-15T20:56:35.855Z" />
