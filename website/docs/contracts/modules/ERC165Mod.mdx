---
sidebar_position: 99
title: "ERC165Mod"
description: "LibERC165 — ERC-165 Standard Interface Detection Library - Provides internal functions and storage layout for ERC-165 interface detection."
---

import DocHero from '@site/src/components/docs/DocHero';
import Callout from '@site/src/components/ui/Callout';
import PropertyTable from '@site/src/components/api/PropertyTable';

## Overview

LibERC165 — ERC-165 Standard Interface Detection Library - Provides internal functions and storage layout for ERC-165 interface detection.

[View Source](https://github.com/maxnorm/Compose/blob/bd92d896acdf08abd003a5846f267d6de9578ab5/src/interfaceDetection/ERC165/ERC165Mod.sol)

<Callout type="info" title="Key Features">
- All functions are &#x60;internal&#x60; for use in custom facets
- Follows diamond storage pattern (EIP-8042)
- Compatible with ERC-2535 diamonds
- No external dependencies or &#x60;using&#x60; directives
</Callout>

<Callout type="info" title="Module Usage">
This module provides internal functions for use in your custom facets. Import it to access shared logic and storage.
</Callout>

## Structs

### ERC165Storage

```solidity
struct ERC165Storage {
/*
 * @notice Mapping of interface IDs to whether they are supported
 */
mapping(bytes4 &#x3D;&gt; bool) supportedInterfaces;
}
```

## Storage

Storage position: &#x60;STORAGE_POSITION&#x60; - Used for diamond storage pattern.

### State Variables

<PropertyTable
  properties={[
    {
      name: "STORAGE_POSITION",
      type: "bytes32",
      description: " (Value: `keccak256(&quot;compose.erc165&quot;)`)"
    }
  ]}
  showRequired={false}
/>

## Functions

### getStorage

Returns a pointer to the ERC-165 storage struct. Uses inline assembly to bind the storage struct to the fixed storage position. **Returns**

```solidity
function getStorage() pure returns (ERC165Storage storage s);
```

<PropertyTable
  properties={[
    {
      name: "s",
      type: "ERC165Storage",
      description: "The ERC-165 storage struct."
    }
  ]}
  showRequired={false}
/>

### registerInterface

Register that a contract supports an interface Call this function during initialization to register supported interfaces. For example, in an ERC721 facet initialization, you would call: &#x60;LibERC165.registerInterface(type(IERC721).interfaceId)&#x60; **Parameters**

```solidity
function registerInterface(bytes4 _interfaceId) ;
```

<PropertyTable
  properties={[
    {
      name: "_interfaceId",
      type: "bytes4",
      description: "The interface ID to register"
    }
  ]}
  showRequired={false}
/>

## Integration Notes

<Callout type="success" title="Shared Storage">
This module accesses shared diamond storage, so changes made through this module are immediately visible to facets using the same storage pattern. All functions are internal as per Compose conventions.
</Callout>
