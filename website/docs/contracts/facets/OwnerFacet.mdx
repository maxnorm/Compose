---
sidebar_position: 99
title: "OwnerFacet"
description: "**Title:**"
gitSource: "https://github.com/maxnorm/Compose/blob/35c4fb10b73eff0850482e188d0f1eca595cff2c/src/access/Owner/OwnerFacet.sol"
---

import DocSubtitle  from '@site/src/components/docs/DocSubtitle';
import Badge from '@site/src/components/ui/Badge';
import Callout from '@site/src/components/ui/Callout';
import CalloutBox from '@site/src/components/ui/CalloutBox';
import Accordion, { AccordionGroup } from '@site/src/components/ui/Accordion';
import PropertyTable from '@site/src/components/api/PropertyTable';
import ExpandableCode from '@site/src/components/code/ExpandableCode';
import CodeShowcase from '@site/src/components/code/CodeShowcase';
import RelatedDocs from '@site/src/components/docs/RelatedDocs';
import WasThisHelpful from '@site/src/components/docs/WasThisHelpful';
import LastUpdated from '@site/src/components/docs/LastUpdated';
import ReadingTime from '@site/src/components/docs/ReadingTime';
import GradientText from '@site/src/components/ui/GradientText';
import GradientButton from '@site/src/components/ui/GradientButton';

<DocSubtitle>
**Title:**
</DocSubtitle>

<Callout type="info" title="Key Features">
- Provides secure ownership management, including transfer and renunciation.
- Implements diamond storage pattern for isolation and compatibility.
- Supports permissioned access to administrative functions via the &#x60;owner&#x60; address.
</Callout>

## Overview

The OwnerFacet provides ownership management functionality for Compose diamonds, including retrieving the owner address, transferring ownership, and renouncing ownership. It enables controlled access to administrative functions within the diamond and adheres to the diamond storage pattern for state management.

---

## Storage

### OwnerStorage

<ExpandableCode language="solidity" maxLines={15} title="Definition">
{`struct OwnerStorage {
    address owner;
}`}
</ExpandableCode>

---
### State Variables

<PropertyTable
  properties={[
    {
      name: "STORAGE_POSITION",
      type: "constant",
      description: ""
    }
  ]}
  showRequired={false}
/>

## Functions

### getStorage

Returns a pointer to the owner storage struct. Uses inline assembly to access the storage slot defined by STORAGE_POSITION.

<ExpandableCode language="solidity" maxLines={8}>
{`function getStorage() internal pure returns (OwnerStorage storage s);`}
</ExpandableCode>

**Returns:**

<PropertyTable
  properties={[
    {
      name: "s",
      type: "OwnerStorage",
      description: "The OwnerStorage struct in storage."
    }
  ]}
  showRequired={false}
/>

---
### owner

Get the address of the owner

<ExpandableCode language="solidity" maxLines={8}>
{`function owner() external view returns (address);`}
</ExpandableCode>

**Returns:**

<PropertyTable
  properties={[
    {
      name: "-",
      type: "address",
      description: "The address of the owner."
    }
  ]}
  showRequired={false}
/>

---
### transferOwnership

Set the address of the new owner of the contract Set _newOwner to address(0) to renounce any ownership.

<ExpandableCode language="solidity" maxLines={8}>
{`function transferOwnership(address _newOwner) external;`}
</ExpandableCode>

**Parameters:**

<PropertyTable
  properties={[
    {
      name: "_newOwner",
      type: "address",
      description: "The address of the new owner of the contract"
    }
  ]}
  showRequired={false}
/>

---
### renounceOwnership

<ExpandableCode language="solidity" maxLines={8}>
{`function renounceOwnership() external;`}
</ExpandableCode>

## Events

<AccordionGroup>
  <Accordion title="OwnershipTransferred" defaultOpen={false}>

    <div style={{marginBottom: "1rem"}}>
      <strong>Signature:</strong>
      <ExpandableCode language="solidity" maxLines={5}>
{`event OwnershipTransferred(address indexed previousOwner, address indexed newOwner);`}
      </ExpandableCode>
    </div>

  </Accordion>
</AccordionGroup>

## Errors

<AccordionGroup>
  <Accordion title="OwnerUnauthorizedAccount" defaultOpen={false}>

    <div>
      <strong>Signature:</strong>
      <ExpandableCode language="solidity" maxLines={5}>
error OwnerUnauthorizedAccount();
      </ExpandableCode>
    </div>
  </Accordion>
</AccordionGroup>

## Usage Example

<ExpandableCode language="solidity" maxLines={20} title="Example Implementation">
{`pragma solidity ^0.8.30;

import { IDiamondCut } from "./interfaces/IDiamondCut.sol";
import { OwnerFacet } from "./facets/OwnerFacet.sol";

contract DeployDiamond {
    function deploy() external {
        // Deploy the diamond
        address diamond = address(new Diamond());

        // Add the OwnerFacet to the diamond
        IDiamondCut.FacetCut[] memory facetCuts = new IDiamondCut.FacetCut[](1);
        facetCuts[0] = IDiamondCut.FacetCut({
            facetAddress: address(new OwnerFacet()),
            action: IDiamondCut.FacetCutAction.Add,
            functionSelectors: new bytes4[](4)
        });

        facetCuts[0].functionSelectors[0] = OwnerFacet.owner.selector;
        facetCuts[0].functionSelectors[1] = OwnerFacet.transferOwnership.selector;
        facetCuts[0].functionSelectors[2] = OwnerFacet.renounceOwnership.selector;
        facetCuts[0].functionSelectors[3] = OwnerFacet.getStorage.selector;

        // Perform the diamond cut
        IDiamondCut(diamond).diamondCut(facetCuts, address(0), new bytes(0));

        // Use the OwnerFacet
        OwnerFacet ownerFacet = OwnerFacet(diamond);
        address currentOwner = ownerFacet.owner();
        ownerFacet.transferOwnership(msg.sender);
    }
}`}
</ExpandableCode>

## Best Practices

<Callout type="tip" title="Best Practice">
- Always initialize the owner address during diamond deployment to prevent unauthorized access.
- Use the &#x60;getStorage&#x60; function to interact with owner storage in a safe manner, adhering to the diamond storage pattern.
- Ensure upgrades involving this facet maintain compatibility by preserving the storage layout and slot definition.
</Callout>

## Security Considerations

<Callout type="warning" title="Security">
Ensure that &#x60;transferOwnership&#x60; and &#x60;renounceOwnership&#x60; functions are invoked only by the current owner to prevent unauthorized access. Validate inputs to avoid setting an invalid owner address. Be cautious of reentrancy when integrating with other facets, especially during ownership transitions.
</Callout>

<div style={{marginTop: "3rem", paddingTop: "2rem", borderTop: "1px solid var(--ifm-color-emphasis-200)"}}>
  <WasThisHelpful pageId="OwnerFacet" />
</div>

<LastUpdated date="2025-12-17T00:37:36.278Z" />
